function start_inline(b){b.fn.formset=function(e){var a=b.extend({},b.fn.formset.defaults,e);e=b(this);var n=e.parent(),p=function(c,g,t){var l=new RegExp("("+g+"-(\\d+|__prefix__))");g=g+"-"+t;b(c).prop("for")&&b(c).prop("for",b(c).prop("for").replace(l,g));c.id&&(c.id=c.id.replace(l,g));c.name&&(c.name=c.name.replace(l,g))},k=b("#id_"+a.prefix+"-TOTAL_FORMS").prop("autocomplete","off"),f=parseInt(k.val(),10),d=b("#id_"+a.prefix+"-MAX_NUM_FORMS").prop("autocomplete","off"),h=b("#id_"+a.prefix+"-MIN_NUM_FORMS").prop("autocomplete",
"off"),m=function(c){c.is("tr")?c.children(":last").append('<div><a class="'+a.deleteCssClass+'" href="#">'+a.deleteText+"</a></div>"):c.is("ul")||c.is("ol")?c.append('<li><a class="'+a.deleteCssClass+'" href="#">'+a.deleteText+"</a></li>"):c.children(":first").append('<span><a class="'+a.deleteCssClass+'" href="#">'+a.deleteText+"</a></span>");c.find("a."+a.deleteCssClass).on("click",u.bind(this))},u=function(c){c.preventDefault();c=b(c.target).closest("."+a.formCssClass);var g=c.closest(".inline-group");
c.remove();--f;a.removed&&a.removed(c);b(document).trigger("formset:removed",[c,a.prefix]);c=b("."+a.formCssClass);b("#id_"+a.prefix+"-TOTAL_FORMS").val(c.length);(""===d.val()||0<d.val()-c.length)&&r.parent().show();""!==h.val()&&0<=h.val()-k.val()?g.find(".inline-deletelink").hide():g.find(".inline-deletelink").show();q(g);var t=function(){p(this,a.prefix,l)};var l=0;for(g=c.length;l<g;l++)p(b(c).get(l),a.prefix,l),b(c.get(l)).find("*").each(t)},q=function(c){""!==h.val()&&0<=h.val()-k.val()?c.find(".inline-deletelink").hide():
c.find(".inline-deletelink").show()},v=""===d.val()||0<d.val()-k.val();e.each(function(c){b(this).not("."+a.emptyCssClass).addClass(a.formCssClass)});if(e.length){var r=a.addButton;if(null===r)if("TR"===e.prop("tagName")){var w=this.eq(-1).children().length;n.append('<tr class="'+a.addCssClass+'"><td colspan="'+w+'"><a href="#">'+a.addText+"</a></tr>");r=n.find("tr:last a")}else e.filter(":last").after('<div class="'+a.addCssClass+'"><a href="#">'+a.addText+"</a></div>"),r=e.filter(":last").next().find("a");
v||b("."+a.addCssClass).hide();e.filter("."+a.formCssClass+":not(.has_original):not(."+a.emptyCssClass+")").each(function(){m(b(this))});q(e);r.click(function(c){c.preventDefault();c=b("#"+a.prefix+"-empty");var g=c.clone(!0);g.removeClass(a.emptyCssClass).addClass(a.formCssClass).attr("id",a.prefix+"-"+f);m(g);g.find("*").each(function(){p(this,a.prefix,k.val())});g.insertBefore(b(c));b(k).val(parseInt(k.val(),10)+1);f+=1;""!==d.val()&&0>=d.val()-k.val()&&r.parent().hide();q(g.closest(".inline-group"));
a.added&&a.added(g);b(document).trigger("formset:added",[g,a.prefix])})}return this};b.fn.formset.defaults={prefix:"form",addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",emptyCssClass:"empty-row",formCssClass:"dynamic-form",added:null,removed:null,addButton:null};b.fn.tabularFormset=function(e){console.log("I'm here");var a=b(this),n=function(f){b(a.selector).not(".add-row").removeClass("row1 row2").filter(":even").addClass("row1").end().filter(":odd").addClass("row2")},
p=function(){"undefined"!==typeof SelectFilter&&(b(".selectfilter").each(function(f,d){var h=d.name.split("-");SelectFilter.init(d.id,h[h.length-1],!1)}),b(".selectfilterstacked").each(function(f,d){var h=d.name.split("-");SelectFilter.init(d.id,h[h.length-1],!0)}))},k=function(f){f.find(".prepopulated_field").each(function(){var d=b(this).find("input, select, textarea"),h=d.data("dependency_list")||[],m=[];b.each(h,function(u,q){m.push("#"+f.find(".field-"+q).find("input, select, textarea").attr("id"))});
m.length&&d.prepopulate(m,d.attr("maxlength"))})};a.formset({prefix:e.prefix,addText:e.addText,formCssClass:"dynamic-"+e.prefix,deleteCssClass:"inline-deletelink",deleteText:e.deleteText,emptyCssClass:"empty-form",removed:n,added:function(f){k(f);"undefined"!==typeof DateTimeShortcuts&&(b(".datetimeshortcuts").remove(),DateTimeShortcuts.init());p();n(f)},addButton:e.addButton});return a};b.fn.stackedFormset=function(e){var a=b(this),n=function(f){b(a.selector).find(".inline_label").each(function(d){d+=
1;b(this).html(b(this).html().replace(/(#\d+)/g,"#"+d))})},p=function(){"undefined"!==typeof SelectFilter&&(b(".selectfilter").each(function(f,d){var h=d.name.split("-");SelectFilter.init(d.id,h[h.length-1],!1)}),b(".selectfilterstacked").each(function(f,d){var h=d.name.split("-");SelectFilter.init(d.id,h[h.length-1],!0)}))},k=function(f){f.find(".prepopulated_field").each(function(){var d=b(this).find("input, select, textarea"),h=d.data("dependency_list")||[],m=[];b.each(h,function(u,q){m.push("#"+
f.find(".form-row.field-"+q).find("input, select, textarea").attr("id"))});m.length&&d.prepopulate(m,d.attr("maxlength"))})};a.formset({prefix:e.prefix,addText:e.addText,formCssClass:"dynamic-"+e.prefix,deleteCssClass:"inline-deletelink",deleteText:e.deleteText,emptyCssClass:"empty-form",removed:n,added:function(f){k(f);"undefined"!==typeof DateTimeShortcuts&&(b(".datetimeshortcuts").remove(),DateTimeShortcuts.init());p();n(f)},addButton:e.addButton});return a};b(document).ready(function(){b(".js-inline-admin-formset").each(function(){var e=
b(this).data(),a=e.inlineFormset;switch(e.inlineType){case "stacked":b(a.name+"-group .inline-related").stackedFormset(a.options);break;case "tabular":b(a.name+"-group .tabular.inline-related tbody:first > tr").tabularFormset(a.options)}})})}function start_inline_loader(){try{start_inline(django.jQuery)}catch(b){console.log("no jQuery, try again after 300 mc"),setTimeout(function(){start_inline_loader()},300)}}$(document).ready(function(){start_inline_loader()});
